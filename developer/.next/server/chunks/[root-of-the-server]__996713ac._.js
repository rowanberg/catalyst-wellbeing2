module.exports=[18622,(e,t,a)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(e,t,a)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},34746,e=>{"use strict";var t=e.i(47909),a=e.i(74017),r=e.i(96250),s=e.i(59756),i=e.i(61916),n=e.i(14444),o=e.i(37092),l=e.i(69741),d=e.i(16795),p=e.i(87718),u=e.i(95169),c=e.i(47587),v=e.i(66012),h=e.i(70101),_=e.i(26937),m=e.i(10372),w=e.i(93695);e.i(52474);var f=e.i(5232),g=e.i(89171),x=e.i(87464);e.i(94879);var R=e.i(87022),y=e.i(93458);let E=()=>{let e="https://kbyeiqzxuaslqquhpyvi.supabase.co",t=process.env.DEV_SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e||!t)throw Error("Supabase admin credentials not configured");return(0,x.createClient)(e,t,{auth:{autoRefreshToken:!1,persistSession:!1}})};async function A(){let e=await (0,y.cookies)(),t=(0,R.createServerClient)("https://kbyeiqzxuaslqquhpyvi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtieWVpcXp4dWFzbHFxdWhweXZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg1NTc3OTMsImV4cCI6MjA4NDEzMzc5M30.wqWNzF9LYT7SmF0FOrFvdAlihyUafxuxlzIQPAoL9Zg",{cookies:{getAll:()=>e.getAll()}}),{data:{user:a}}=await t.auth.getUser();if(!a)return null;let r=E(),{data:s}=await r.from("developer_accounts").select("*, role").eq("auth_user_id",a.id).single();return s&&["admin","super_admin"].includes(s.role)?s:null}async function b(e,{params:t}){try{if(!await A())return g.NextResponse.json({error:"Unauthorized"},{status:403});let{id:e}=await t,a=E(),{data:r,error:s}=await a.from("developer_applications").select(`
                *,
                developer:developer_accounts(
                    id, company_name, email, verified, created_at,
                    full_name, phone, website
                )
            `).eq("id",e).single();if(s||!r)return g.NextResponse.json({error:"Application not found"},{status:404});let{data:i}=await a.from("app_reviews").select(`
                id,
                action,
                notes,
                created_at,
                reviewer:developer_accounts!reviewer_id(id, full_name, email)
            `).eq("application_id",e).order("created_at",{ascending:!1}),{count:n}=await a.from("oauth_authorization_codes").select("*",{count:"exact",head:!0}).eq("application_id",e),{count:o}=await a.from("oauth_access_tokens").select("*",{count:"exact",head:!0}).eq("application_id",e),l=Array.isArray(r.developer)?r.developer[0]:r.developer;return g.NextResponse.json({application:{...r,developer:{id:l?.id,company_name:l?.company_name,email:l?.email,verified:l?.verified,created_at:l?.created_at,full_name:l?.full_name,website:l?.website}},review_history:i?.map(e=>{let t=Array.isArray(e.reviewer)?e.reviewer[0]:e.reviewer;return{id:e.id,action:e.action,notes:e.notes,created_at:e.created_at,reviewer:{name:t?.full_name,email:t?.email}}})||[],statistics:{total_authorizations:n||0,total_tokens:o||0},checklist:{has_privacy_policy:!!r.privacy_policy_url,has_terms_of_service:!!r.terms_of_service_url,has_support_contact:!!r.support_email,has_logo:!!r.logo_url,has_description:r.description?.length>50,developer_verified:l?.verified||!1}})}catch(e){return console.error("Admin review API error:",e),g.NextResponse.json({error:e.message},{status:500})}}async function C(e,{params:t}){try{let a,r=await A();if(!r)return g.NextResponse.json({error:"Unauthorized"},{status:403});let{id:s}=await t,{action:i,notes:n,approved_scopes:o}=await e.json(),l=["approve","reject","request_changes","suspend","reinstate"];if(!l.includes(i))return g.NextResponse.json({error:`Invalid action. Must be one of: ${l.join(", ")}`},{status:400});let d=E(),{data:p}=await d.from("developer_applications").select("*, developer:developer_accounts(id, email, full_name)").eq("id",s).single();if(!p)return g.NextResponse.json({error:"Application not found"},{status:404});switch(i){case"approve":case"reinstate":a="approved";break;case"reject":a="rejected";break;case"request_changes":a="changes_requested";break;case"suspend":a="suspended";break;default:a=p.status}let u={status:a,updated_at:new Date().toISOString()};"approve"===i&&(u.approved_at=new Date().toISOString(),u.approved_by=r.id,o&&(u.allowed_scopes=o)),"reject"===i&&(u.rejected_at=new Date().toISOString(),u.rejection_reason=n),await d.from("developer_applications").update(u).eq("id",s),await d.from("app_reviews").insert({application_id:s,reviewer_id:r.id,action:i,notes:n,previous_status:p.status,new_status:a});let c=Array.isArray(p.developer)?p.developer[0]:p.developer;if(c){let e={approve:{title:`"${p.name}" Approved!`,message:"Congratulations! Your application has been approved and is now live.",type:"success"},reject:{title:`"${p.name}" Not Approved`,message:`Your application was not approved. Reason: ${n||"See details in your dashboard."}`,type:"error"},request_changes:{title:`Changes Requested for "${p.name}"`,message:n||"Please review the requested changes in your dashboard.",type:"warning"},suspend:{title:`"${p.name}" Suspended`,message:`Your application has been suspended. Reason: ${n||"Contact support for details."}`,type:"error"},reinstate:{title:`"${p.name}" Reinstated`,message:"Your application has been reinstated and is now active.",type:"success"}}[i];await d.from("developer_notifications").insert({developer_id:c.id,title:e.title,message:e.message,type:e.type,category:"app_review",action_url:`/dashboard/applications/${s}`,action_label:"View Application"})}return await d.from("admin_activity_logs").insert({admin_id:r.id,action:`app_${i}`,resource_type:"application",resource_id:s,details:{notes:n,previous_status:p.status,new_status:a},ip_address:e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")}),g.NextResponse.json({success:!0,application_id:s,action:i,previous_status:p.status,new_status:a,message:`Application ${i}d successfully`})}catch(e){return console.error("Admin review action error:",e),g.NextResponse.json({error:e.message},{status:500})}}e.s(["GET",()=>b,"POST",()=>C],78608);var S=e.i(78608);let q=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/admin/apps/[id]/review/route",pathname:"/api/admin/apps/[id]/review",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/developer/src/app/api/admin/apps/[id]/review/route.ts",nextConfigOutput:"",userland:S}),{workAsyncStorage:j,workUnitAsyncStorage:I,serverHooks:N}=q;function k(){return(0,r.patchFetch)({workAsyncStorage:j,workUnitAsyncStorage:I})}async function O(e,t,r){q.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let g="/api/admin/apps/[id]/review/route";g=g.replace(/\/index$/,"")||"/";let x=await q.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:R,params:y,nextConfig:E,parsedUrl:A,isDraftMode:b,prerenderManifest:C,routerServerContext:S,isOnDemandRevalidate:j,revalidateOnlyGenerated:I,resolvedPathname:N,clientReferenceManifest:k,serverActionsManifest:O}=x,P=(0,l.normalizeAppPath)(g),T=!!(C.dynamicRoutes[P]||C.routes[N]),U=async()=>((null==S?void 0:S.render404)?await S.render404(e,t,A,!1):t.end("This page could not be found"),null);if(T&&!b){let e=!!C.routes[N],t=C.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(E.experimental.adapterPath)return await U();throw new w.NoFallbackError}}let M=null;!T||q.isDev||b||(M="/index"===(M=N)?"/":M);let $=!0===q.isDev||!T,D=T&&!$;O&&k&&(0,n.setReferenceManifestsSingleton)({page:g,clientReferenceManifest:k,serverActionsManifest:O,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:O})});let H=e.method||"GET",F=(0,i.getTracer)(),z=F.getActiveScopeSpan(),K={params:y,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!E.experimental.authInterrupts},cacheComponents:!!E.cacheComponents,supportsDynamicResponse:$,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:E.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r)=>q.onRequestError(e,t,r,S)},sharedContext:{buildId:R}},L=new d.NodeNextRequest(e),V=new d.NodeNextResponse(t),Y=p.NextRequestAdapter.fromNodeNextRequest(L,(0,p.signalFromNodeResponse)(t));try{let n=async e=>q.handle(Y,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=F.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${H} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${g}`)}),o=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var i,l;let d=async({previousCacheEntry:a})=>{try{if(!o&&j&&I&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await n(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let d=K.renderOpts.collectedTags;if(!T)return await (0,v.sendResponse)(L,V,i,K.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(i.headers);d&&(t[m.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,r=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await q.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:j})},S),t}},p=await q.handleResponse({req:e,nextConfig:E,cacheKey:M,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:I,responseGenerator:d,waitUntil:r.waitUntil,isMinimalMode:o});if(!T)return null;if((null==p||null==(i=p.value)?void 0:i.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(l=p.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",j?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,h.fromNodeOutgoingHttpHeaders)(p.value.headers);return o&&T||u.delete(m.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,_.getCacheControlHeader)(p.cacheControl)),await (0,v.sendResponse)(L,V,new Response(p.value.body,{headers:u,status:p.value.status||200})),null};z?await l(z):await F.withPropagatedContext(e.headers,()=>F.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${g}`,kind:i.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof w.NoFallbackError||await q.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,c.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:j})}),T)throw t;return await (0,v.sendResponse)(L,V,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>k,"routeModule",()=>q,"serverHooks",()=>N,"workAsyncStorage",()=>j,"workUnitAsyncStorage",()=>I],34746)},36145,e=>{e.v(e=>Promise.resolve().then(()=>e(2808)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__996713ac._.js.map