{"version":3,"sources":["../../../../../developer/src/app/dashboard/schools/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport {\r\n    Building2,\r\n    Search,\r\n    Plus,\r\n    CheckCircle,\r\n    Clock,\r\n    XCircle,\r\n    ExternalLink,\r\n    Users,\r\n    Calendar,\r\n    BarChart3,\r\n    Shield,\r\n    ChevronRight,\r\n    Loader2,\r\n    RefreshCw,\r\n    AlertTriangle,\r\n    MapPin,\r\n    Globe\r\n} from 'lucide-react'\r\nimport { devSupabase } from '@/lib/supabase'\r\n\r\ninterface School {\r\n    id: string\r\n    name: string\r\n    code: string\r\n    logo_url?: string\r\n    location: {\r\n        city: string\r\n        state: string\r\n        country: string\r\n    }\r\n    student_count: number\r\n    type: string\r\n}\r\n\r\ninterface AccessRequest {\r\n    id: string\r\n    school_id: string\r\n    school_name: string\r\n    status: 'pending' | 'approved' | 'rejected'\r\n    requested_at: string\r\n    purpose: string\r\n    requested_scopes: string[]\r\n}\r\n\r\ninterface LinkedSchool {\r\n    school_id: string\r\n    school_name: string\r\n    school_logo?: string\r\n    school_code: string\r\n    location: { city: string; state: string }\r\n    linked_at: string\r\n    approved_scopes: string[]\r\n    usage: {\r\n        api_calls_30d: number\r\n        active_users: number\r\n    }\r\n}\r\n\r\nexport default function SchoolLinkingPage() {\r\n    const [loading, setLoading] = useState(true)\r\n    const [activeTab, setActiveTab] = useState<'linked' | 'requests' | 'discover'>('linked')\r\n    const [applications, setApplications] = useState<any[]>([])\r\n    const [selectedApp, setSelectedApp] = useState<string>('')\r\n    const [linkedSchools, setLinkedSchools] = useState<LinkedSchool[]>([])\r\n    const [accessRequests, setAccessRequests] = useState<AccessRequest[]>([])\r\n    const [allSchools, setAllSchools] = useState<School[]>([])\r\n    const [searchQuery, setSearchQuery] = useState('')\r\n    const [showRequestModal, setShowRequestModal] = useState(false)\r\n    const [selectedSchool, setSelectedSchool] = useState<School | null>(null)\r\n    const [requestPurpose, setRequestPurpose] = useState('')\r\n    const [requestScopes, setRequestScopes] = useState<string[]>([])\r\n    const [submitting, setSubmitting] = useState(false)\r\n\r\n    const availableScopes = [\r\n        { id: 'student.profile.read', label: 'Student Profiles', description: 'Read student names, grades, sections' },\r\n        { id: 'student.attendance.read', label: 'Attendance Data', description: 'Read attendance records' },\r\n        { id: 'student.academic.read', label: 'Academic Records', description: 'Read grades and marks' },\r\n        { id: 'student.timetable.read', label: 'Timetable', description: 'Read class schedules' },\r\n        { id: 'school.structure.read', label: 'School Structure', description: 'Read classes, sections, subjects' },\r\n        { id: 'wellbeing.mood.read', label: 'Wellbeing Data', description: 'Read mood and wellness (requires consent)' }\r\n    ]\r\n\r\n    useEffect(() => {\r\n        loadData()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (selectedApp) {\r\n            loadLinkedSchools()\r\n            loadAccessRequests()\r\n        }\r\n    }, [selectedApp])\r\n\r\n    const loadData = async () => {\r\n        try {\r\n            const { data: { user } } = await devSupabase.auth.getUser()\r\n            if (!user) return\r\n\r\n            const { data: account } = await devSupabase\r\n                .from('developer_accounts')\r\n                .select('id')\r\n                .eq('auth_user_id', user.id)\r\n                .single()\r\n\r\n            if (!account) return\r\n\r\n            // Get applications\r\n            const { data: apps } = await devSupabase\r\n                .from('developer_applications')\r\n                .select('id, name, status')\r\n                .eq('developer_id', account.id)\r\n                .eq('status', 'approved')\r\n\r\n            if (apps && apps.length > 0) {\r\n                setApplications(apps)\r\n                setSelectedApp(apps[0].id)\r\n            }\r\n\r\n            // Load sample schools for discovery\r\n            setAllSchools([\r\n                {\r\n                    id: 'sch_001',\r\n                    name: 'Springfield High School',\r\n                    code: 'SHS',\r\n                    location: { city: 'Springfield', state: 'IL', country: 'USA' },\r\n                    student_count: 1250,\r\n                    type: 'high_school'\r\n                },\r\n                {\r\n                    id: 'sch_002',\r\n                    name: 'Riverside Elementary',\r\n                    code: 'RES',\r\n                    location: { city: 'Portland', state: 'OR', country: 'USA' },\r\n                    student_count: 450,\r\n                    type: 'elementary'\r\n                },\r\n                {\r\n                    id: 'sch_003',\r\n                    name: 'Oakwood International Academy',\r\n                    code: 'OIA',\r\n                    location: { city: 'Austin', state: 'TX', country: 'USA' },\r\n                    student_count: 890,\r\n                    type: 'international'\r\n                },\r\n                {\r\n                    id: 'sch_004',\r\n                    name: 'Mumbai Central School',\r\n                    code: 'MCS',\r\n                    location: { city: 'Mumbai', state: 'MH', country: 'India' },\r\n                    student_count: 2100,\r\n                    type: 'cbse'\r\n                },\r\n                {\r\n                    id: 'sch_005',\r\n                    name: 'Delhi Public School',\r\n                    code: 'DPS',\r\n                    location: { city: 'New Delhi', state: 'DL', country: 'India' },\r\n                    student_count: 3500,\r\n                    type: 'cbse'\r\n                }\r\n            ])\r\n        } catch (error) {\r\n            console.error('Error loading data:', error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const loadLinkedSchools = async () => {\r\n        try {\r\n            const response = await fetch(`/api/schools/linked?application_id=${selectedApp}`)\r\n            if (response.ok) {\r\n                const data = await response.json()\r\n                setLinkedSchools(data.schools || [])\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading linked schools:', error)\r\n            // Use sample data\r\n            setLinkedSchools([\r\n                {\r\n                    school_id: 'sch_001',\r\n                    school_name: 'Springfield High School',\r\n                    school_code: 'SHS',\r\n                    location: { city: 'Springfield', state: 'IL' },\r\n                    linked_at: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\r\n                    approved_scopes: ['student.profile.read', 'student.attendance.read'],\r\n                    usage: { api_calls_30d: 15420, active_users: 245 }\r\n                }\r\n            ])\r\n        }\r\n    }\r\n\r\n    const loadAccessRequests = async () => {\r\n        try {\r\n            const response = await fetch(`/api/schools/request?application_id=${selectedApp}`)\r\n            if (response.ok) {\r\n                const data = await response.json()\r\n                setAccessRequests(data.requests || [])\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading access requests:', error)\r\n            // Use sample data\r\n            setAccessRequests([\r\n                {\r\n                    id: 'req_001',\r\n                    school_id: 'sch_003',\r\n                    school_name: 'Oakwood International Academy',\r\n                    status: 'pending',\r\n                    requested_at: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\r\n                    purpose: 'To provide tutoring services',\r\n                    requested_scopes: ['student.profile.read', 'student.academic.read']\r\n                }\r\n            ])\r\n        }\r\n    }\r\n\r\n    const handleRequestAccess = async () => {\r\n        if (!selectedSchool || !requestPurpose || requestScopes.length === 0) return\r\n\r\n        setSubmitting(true)\r\n        try {\r\n            const response = await fetch('/api/schools/request', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    application_id: selectedApp,\r\n                    school_id: selectedSchool.id,\r\n                    purpose: requestPurpose,\r\n                    requested_scopes: requestScopes\r\n                })\r\n            })\r\n\r\n            if (response.ok) {\r\n                setShowRequestModal(false)\r\n                setSelectedSchool(null)\r\n                setRequestPurpose('')\r\n                setRequestScopes([])\r\n                loadAccessRequests()\r\n            }\r\n        } catch (error) {\r\n            console.error('Error requesting access:', error)\r\n        } finally {\r\n            setSubmitting(false)\r\n        }\r\n    }\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        switch (status) {\r\n            case 'approved':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 rounded-lg text-xs font-medium\">\r\n                        <CheckCircle className=\"w-3 h-3\" />\r\n                        Approved\r\n                    </span>\r\n                )\r\n            case 'pending':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded-lg text-xs font-medium\">\r\n                        <Clock className=\"w-3 h-3\" />\r\n                        Pending\r\n                    </span>\r\n                )\r\n            case 'rejected':\r\n                return (\r\n                    <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-red-500/20 text-red-400 rounded-lg text-xs font-medium\">\r\n                        <XCircle className=\"w-3 h-3\" />\r\n                        Rejected\r\n                    </span>\r\n                )\r\n            default:\r\n                return null\r\n        }\r\n    }\r\n\r\n    const filteredSchools = allSchools.filter(school =>\r\n        school.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        school.code.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        school.location.city.toLowerCase().includes(searchQuery.toLowerCase())\r\n    )\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center h-96\">\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n                    <Loader2 className=\"w-8 h-8 text-blue-500 animate-spin\" />\r\n                    <p className=\"text-slate-400\">Loading school connections...</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl sm:text-3xl font-bold text-white flex items-center gap-3\">\r\n                        <Building2 className=\"w-8 h-8 text-blue-400\" />\r\n                        School Connections\r\n                    </h1>\r\n                    <p className=\"text-slate-400 mt-1\">\r\n                        Manage school access for your applications\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex items-center gap-3\">\r\n                    {applications.length > 0 && (\r\n                        <select\r\n                            value={selectedApp}\r\n                            onChange={(e) => setSelectedApp(e.target.value)}\r\n                            className=\"px-4 py-2 bg-slate-800 border border-slate-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/20\"\r\n                        >\r\n                            {applications.map((app) => (\r\n                                <option key={app.id} value={app.id}>{app.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    )}\r\n                    <button\r\n                        onClick={() => setActiveTab('discover')}\r\n                        className=\"inline-flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-semibold text-sm transition-all\"\r\n                    >\r\n                        <Plus className=\"w-4 h-4\" />\r\n                        Request Access\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\r\n                <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 bg-green-500/20 rounded-xl\">\r\n                            <CheckCircle className=\"w-6 h-6 text-green-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-2xl font-bold text-white\">{linkedSchools.length}</p>\r\n                            <p className=\"text-sm text-slate-400\">Linked Schools</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 bg-yellow-500/20 rounded-xl\">\r\n                            <Clock className=\"w-6 h-6 text-yellow-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-2xl font-bold text-white\">\r\n                                {accessRequests.filter(r => r.status === 'pending').length}\r\n                            </p>\r\n                            <p className=\"text-sm text-slate-400\">Pending Requests</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 bg-blue-500/20 rounded-xl\">\r\n                            <Users className=\"w-6 h-6 text-blue-400\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-2xl font-bold text-white\">\r\n                                {linkedSchools.reduce((sum, s) => sum + (s.usage?.active_users || 0), 0).toLocaleString()}\r\n                            </p>\r\n                            <p className=\"text-sm text-slate-400\">Active Users</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Tab Navigation */}\r\n            <div className=\"flex items-center gap-1 p-1 bg-slate-800/50 border border-slate-700/50 rounded-xl w-fit\">\r\n                {[\r\n                    { id: 'linked', label: 'Linked Schools', icon: CheckCircle },\r\n                    { id: 'requests', label: 'Access Requests', icon: Clock },\r\n                    { id: 'discover', label: 'Discover Schools', icon: Search }\r\n                ].map((tab) => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id as any)}\r\n                        className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === tab.id\r\n                                ? 'bg-blue-500/20 text-blue-400'\r\n                                : 'text-slate-400 hover:text-white hover:bg-slate-700/50'\r\n                            }`}\r\n                    >\r\n                        <tab.icon className=\"w-4 h-4\" />\r\n                        {tab.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <AnimatePresence mode=\"wait\">\r\n                {/* Linked Schools */}\r\n                {activeTab === 'linked' && (\r\n                    <motion.div\r\n                        key=\"linked\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        {linkedSchools.length === 0 ? (\r\n                            <div className=\"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-12 text-center\">\r\n                                <Building2 className=\"w-12 h-12 text-slate-500 mx-auto mb-4\" />\r\n                                <h3 className=\"text-lg font-medium text-white mb-2\">No linked schools yet</h3>\r\n                                <p className=\"text-slate-400 mb-6 max-w-md mx-auto\">\r\n                                    Request access to schools to start integrating with their data.\r\n                                </p>\r\n                                <button\r\n                                    onClick={() => setActiveTab('discover')}\r\n                                    className=\"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 text-white rounded-xl font-semibold\"\r\n                                >\r\n                                    <Search className=\"w-4 h-4\" />\r\n                                    Discover Schools\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                {linkedSchools.map((school) => (\r\n                                    <motion.div\r\n                                        key={school.school_id}\r\n                                        initial={{ opacity: 0, y: 20 }}\r\n                                        animate={{ opacity: 1, y: 0 }}\r\n                                        className=\"bg-slate-800/50 border border-slate-700/50 rounded-2xl p-6 hover:border-slate-600 transition-all group\"\r\n                                    >\r\n                                        <div className=\"flex items-start gap-4 mb-4\">\r\n                                            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-slate-600 flex items-center justify-center flex-shrink-0\">\r\n                                                {school.school_logo ? (\r\n                                                    <img src={school.school_logo} alt=\"\" className=\"w-10 h-10 rounded-lg\" />\r\n                                                ) : (\r\n                                                    <Building2 className=\"w-7 h-7 text-blue-400\" />\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <h3 className=\"font-semibold text-white truncate\">{school.school_name}</h3>\r\n                                                <p className=\"text-sm text-slate-400 flex items-center gap-1\">\r\n                                                    <MapPin className=\"w-3 h-3\" />\r\n                                                    {school.location.city}, {school.location.state}\r\n                                                </p>\r\n                                                <p className=\"text-xs text-slate-500 mt-1\">\r\n                                                    Linked {new Date(school.linked_at).toLocaleDateString()}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n                                            <div className=\"bg-slate-900/50 rounded-lg p-3\">\r\n                                                <p className=\"text-lg font-semibold text-white\">\r\n                                                    {(school.usage?.api_calls_30d || 0).toLocaleString()}\r\n                                                </p>\r\n                                                <p className=\"text-xs text-slate-400\">API Calls (30d)</p>\r\n                                            </div>\r\n                                            <div className=\"bg-slate-900/50 rounded-lg p-3\">\r\n                                                <p className=\"text-lg font-semibold text-white\">\r\n                                                    {(school.usage?.active_users || 0).toLocaleString()}\r\n                                                </p>\r\n                                                <p className=\"text-xs text-slate-400\">Active Users</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <p className=\"text-xs text-slate-500 mb-2\">Approved Scopes:</p>\r\n                                            <div className=\"flex flex-wrap gap-1\">\r\n                                                {school.approved_scopes.slice(0, 3).map((scope) => (\r\n                                                    <span key={scope} className=\"text-xs bg-blue-500/10 text-blue-400 px-2 py-0.5 rounded border border-blue-500/20\">\r\n                                                        {scope.split('.')[1]}\r\n                                                    </span>\r\n                                                ))}\r\n                                                {school.approved_scopes.length > 3 && (\r\n                                                    <span className=\"text-xs text-slate-500\">\r\n                                                        +{school.approved_scopes.length - 3} more\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Access Requests */}\r\n                {activeTab === 'requests' && (\r\n                    <motion.div\r\n                        key=\"requests\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"bg-slate-800/50 border border-slate-700/50 rounded-2xl overflow-hidden\"\r\n                    >\r\n                        {accessRequests.length === 0 ? (\r\n                            <div className=\"p-12 text-center\">\r\n                                <Clock className=\"w-12 h-12 text-slate-500 mx-auto mb-4\" />\r\n                                <h3 className=\"text-lg font-medium text-white mb-2\">No pending requests</h3>\r\n                                <p className=\"text-slate-400\">All your access requests have been processed.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"divide-y divide-slate-700/50\">\r\n                                {accessRequests.map((request) => (\r\n                                    <div key={request.id} className=\"p-6 hover:bg-slate-700/20 transition-colors\">\r\n                                        <div className=\"flex items-center justify-between mb-3\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"w-10 h-10 rounded-lg bg-slate-700 flex items-center justify-center\">\r\n                                                    <Building2 className=\"w-5 h-5 text-slate-400\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h3 className=\"font-medium text-white\">{request.school_name}</h3>\r\n                                                    <p className=\"text-sm text-slate-400\">\r\n                                                        Requested {new Date(request.requested_at).toLocaleDateString()}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            {getStatusBadge(request.status)}\r\n                                        </div>\r\n                                        <p className=\"text-sm text-slate-300 mb-3\">{request.purpose}</p>\r\n                                        <div className=\"flex flex-wrap gap-1\">\r\n                                            {request.requested_scopes.map((scope) => (\r\n                                                <span key={scope} className=\"text-xs bg-slate-700/50 text-slate-400 px-2 py-0.5 rounded\">\r\n                                                    {scope}\r\n                                                </span>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Discover Schools */}\r\n                {activeTab === 'discover' && (\r\n                    <motion.div\r\n                        key=\"discover\"\r\n                        initial={{ opacity: 0, y: 10 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -10 }}\r\n                        className=\"space-y-4\"\r\n                    >\r\n                        {/* Search */}\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                placeholder=\"Search schools by name, code, or city...\"\r\n                                className=\"w-full pl-12 pr-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Schools Grid */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                            {filteredSchools.map((school) => {\r\n                                const isLinked = linkedSchools.some(s => s.school_id === school.id)\r\n                                const isPending = accessRequests.some(r => r.school_id === school.id && r.status === 'pending')\r\n\r\n                                return (\r\n                                    <motion.div\r\n                                        key={school.id}\r\n                                        initial={{ opacity: 0, scale: 0.95 }}\r\n                                        animate={{ opacity: 1, scale: 1 }}\r\n                                        className={`bg-slate-800/50 border rounded-2xl p-5 transition-all ${isLinked\r\n                                                ? 'border-green-500/30 bg-green-500/5'\r\n                                                : isPending\r\n                                                    ? 'border-yellow-500/30 bg-yellow-500/5'\r\n                                                    : 'border-slate-700/50 hover:border-slate-600'\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"flex items-start gap-3 mb-4\">\r\n                                            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500/20 to-purple-500/20 border border-slate-600 flex items-center justify-center flex-shrink-0\">\r\n                                                <Building2 className=\"w-6 h-6 text-blue-400\" />\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <h3 className=\"font-semibold text-white truncate\">{school.name}</h3>\r\n                                                <p className=\"text-sm text-slate-400\">{school.code}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2 mb-4\">\r\n                                            <div className=\"flex items-center gap-2 text-sm text-slate-400\">\r\n                                                <MapPin className=\"w-4 h-4\" />\r\n                                                {school.location.city}, {school.location.state}\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2 text-sm text-slate-400\">\r\n                                                <Users className=\"w-4 h-4\" />\r\n                                                {school.student_count.toLocaleString()} students\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {isLinked ? (\r\n                                            <div className=\"flex items-center gap-2 text-green-400 text-sm\">\r\n                                                <CheckCircle className=\"w-4 h-4\" />\r\n                                                Already Linked\r\n                                            </div>\r\n                                        ) : isPending ? (\r\n                                            <div className=\"flex items-center gap-2 text-yellow-400 text-sm\">\r\n                                                <Clock className=\"w-4 h-4\" />\r\n                                                Request Pending\r\n                                            </div>\r\n                                        ) : (\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    setSelectedSchool(school)\r\n                                                    setShowRequestModal(true)\r\n                                                }}\r\n                                                className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg text-sm font-medium transition-colors\"\r\n                                            >\r\n                                                Request Access\r\n                                                <ChevronRight className=\"w-4 h-4\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </motion.div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Request Access Modal */}\r\n            <AnimatePresence>\r\n                {showRequestModal && selectedSchool && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm\"\r\n                        onClick={() => setShowRequestModal(false)}\r\n                    >\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n                            className=\"w-full max-w-lg bg-slate-800 border border-slate-700 rounded-2xl shadow-xl max-h-[90vh] overflow-y-auto\"\r\n                            onClick={(e) => e.stopPropagation()}\r\n                        >\r\n                            <div className=\"p-6 border-b border-slate-700\">\r\n                                <h2 className=\"text-xl font-semibold text-white\">Request School Access</h2>\r\n                                <p className=\"text-sm text-slate-400 mt-1\">\r\n                                    Request access to {selectedSchool.name}\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"p-6 space-y-6\">\r\n                                {/* School Info */}\r\n                                <div className=\"flex items-center gap-4 p-4 bg-slate-900/50 rounded-xl\">\r\n                                    <div className=\"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center\">\r\n                                        <Building2 className=\"w-6 h-6 text-blue-400\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"font-medium text-white\">{selectedSchool.name}</p>\r\n                                        <p className=\"text-sm text-slate-400\">\r\n                                            {selectedSchool.location.city}, {selectedSchool.location.state}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Purpose */}\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                        Purpose of Access *\r\n                                    </label>\r\n                                    <textarea\r\n                                        value={requestPurpose}\r\n                                        onChange={(e) => setRequestPurpose(e.target.value)}\r\n                                        rows={3}\r\n                                        className=\"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20\"\r\n                                        placeholder=\"Describe why your application needs access to this school's data...\"\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Scopes */}\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\r\n                                        Requested Permissions *\r\n                                    </label>\r\n                                    <div className=\"space-y-2\">\r\n                                        {availableScopes.map((scope) => (\r\n                                            <label\r\n                                                key={scope.id}\r\n                                                className={`flex items-start gap-3 p-3 rounded-xl border cursor-pointer transition-colors ${requestScopes.includes(scope.id)\r\n                                                        ? 'bg-blue-500/20 border-blue-500/50'\r\n                                                        : 'bg-slate-900/50 border-slate-700 hover:border-slate-600'\r\n                                                    }`}\r\n                                            >\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    checked={requestScopes.includes(scope.id)}\r\n                                                    onChange={(e) => {\r\n                                                        if (e.target.checked) {\r\n                                                            setRequestScopes([...requestScopes, scope.id])\r\n                                                        } else {\r\n                                                            setRequestScopes(requestScopes.filter(s => s !== scope.id))\r\n                                                        }\r\n                                                    }}\r\n                                                    className=\"mt-0.5 w-4 h-4 rounded border-slate-600 bg-slate-900 text-blue-500 focus:ring-blue-500\"\r\n                                                />\r\n                                                <div>\r\n                                                    <p className=\"text-sm font-medium text-white\">{scope.label}</p>\r\n                                                    <p className=\"text-xs text-slate-500\">{scope.description}</p>\r\n                                                </div>\r\n                                            </label>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Data Usage Declaration */}\r\n                                <div className=\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl\">\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <AlertTriangle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\r\n                                        <div>\r\n                                            <p className=\"text-sm font-medium text-amber-400\">Data Usage Agreement</p>\r\n                                            <p className=\"text-xs text-slate-400 mt-1\">\r\n                                                By requesting access, you agree to handle all data in accordance with\r\n                                                our data protection policies and applicable privacy laws (GDPR, DPDP Act, FERPA).\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-6 border-t border-slate-700 flex items-center justify-end gap-3\">\r\n                                <button\r\n                                    onClick={() => setShowRequestModal(false)}\r\n                                    className=\"px-4 py-2 text-slate-300 hover:text-white transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleRequestAccess}\r\n                                    disabled={submitting || !requestPurpose || requestScopes.length === 0}\r\n                                    className=\"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-slate-600 disabled:to-slate-600 text-white rounded-xl font-semibold text-sm transition-all\"\r\n                                >\r\n                                    {submitting ? (\r\n                                        <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                                    ) : (\r\n                                        <Shield className=\"w-4 h-4\" />\r\n                                    )}\r\n                                    <span>{submitting ? 'Submitting...' : 'Submit Request'}</span>\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}