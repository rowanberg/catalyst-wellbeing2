module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},3314,a=>{"use strict";let b=(0,a.i(70106).default)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);a.s(["Shield",()=>b],3314)},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},80208,a=>{"use strict";let b=(0,a.i(70106).default)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],80208)},67900,a=>{"use strict";let b=(0,a.i(70106).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);a.s(["Building2",()=>b],67900)},53722,a=>{"use strict";let b=(0,a.i(70106).default)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);a.s(["BookOpen",()=>b],53722)},52495,a=>{"use strict";let b=(0,a.i(70106).default)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);a.s(["ExternalLink",()=>b],52495)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},23312,a=>{"use strict";let b=(0,a.i(70106).default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>b],23312)},28616,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>b],28616)},33508,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508)},92258,a=>{"use strict";let b=(0,a.i(70106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],92258)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},41675,61545,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);a.s(["Calendar",()=>c],41675);let d=(0,b.default)("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);a.s(["Brain",()=>d],61545)},53342,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(3314),g=a.i(33441),h=a.i(33508),i=a.i(80208),j=a.i(46842),k=a.i(92258),l=a.i(41675),m=a.i(53722),n=a.i(60246),o=a.i(67900),p=a.i(61545),q=a.i(23312),r=a.i(28616),s=a.i(52495),t=a.i(43108);let u={profile:j.User,email:k.Mail,student:m.BookOpen,teacher:n.Users,parent:n.Users,school:o.Building2,wellbeing:p.Brain,notifications:q.Bell,calendar:l.Calendar},v={low:"text-green-400 bg-green-500/10 border-green-500/30",medium:"text-yellow-400 bg-yellow-500/10 border-yellow-500/30",high:"text-orange-400 bg-orange-500/10 border-orange-500/30",critical:"text-red-400 bg-red-500/10 border-red-500/30"};function w(){let a=(0,d.useSearchParams)(),j=(0,d.useRouter)(),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)({});(0,c.useEffect)(()=>{(async()=>{try{let b=a.toString(),c=await fetch(`/api/oauth/authorize?${b}`);if(!c.ok){let a=await c.json();if(401===c.status)return void j.push(`/login?return_to=${encodeURIComponent(window.location.href)}`);throw Error(a.error_description||"Failed to load consent data")}let d=await c.json();if(d.redirect_url){window.location.href=d.redirect_url;return}x(d.app),z(d.scopes),B(d.user),D(d.params)}catch(a){q(a.message)}finally{l(!1)}})()},[a,j]);let G=async a=>{n(!0);try{let b=await fetch("/api/oauth/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,decision:a})}),c=await b.json();c.redirect_url?window.location.href=c.redirect_url:c.error&&q(c.error_description||c.error)}catch(a){q(a.message)}finally{n(!1)}},H=y.reduce((a,b)=>{let c=b.category||"other";return a[c]||(a[c]=[]),a[c].push(b),a},{});return k?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}):p?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-slate-800/50 backdrop-blur-xl border border-red-500/30 rounded-2xl p-8 text-center",children:[(0,b.jsx)(i.AlertTriangle,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Authorization Error"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6",children:p}),(0,b.jsx)("button",{onClick:()=>window.close(),className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-xl font-semibold",children:"Close Window"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4",children:(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-lg w-full bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 rounded-2xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-slate-700 text-center",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center overflow-hidden",children:w?.logo_url?(0,b.jsx)("img",{src:w.logo_url,alt:w.name,className:"w-full h-full object-cover"}):(0,b.jsx)(o.Building2,{className:"w-8 h-8 text-white"})}),(0,b.jsx)(r.ChevronDown,{className:"w-6 h-6 text-slate-500 rotate-[-90deg]"}),(0,b.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:(0,b.jsx)(f.Shield,{className:"w-8 h-8 text-white"})})]}),(0,b.jsx)("h1",{className:"text-xl font-bold text-white mb-1",children:w?.name||"Application"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm",children:"wants to access your CatalystWells account"}),w?.is_verified&&(0,b.jsxs)("div",{className:"inline-flex items-center gap-1.5 mt-3 px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-xs font-medium",children:[(0,b.jsx)(f.Shield,{className:"w-3 h-3"}),"Verified Application"]})]}),(0,b.jsx)("div",{className:"px-6 py-4 bg-slate-900/30 border-b border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:A?.name?.charAt(0)||"U"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white",children:A?.name}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:A?.email})]})]})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide mb-4",children:"This application will be able to:"}),(0,b.jsx)("div",{className:"space-y-3",children:Object.entries(H).map(([a,c])=>{let d=u[a]||f.Shield;return(0,b.jsx)("div",{className:"bg-slate-900/30 rounded-xl overflow-hidden border border-slate-700/50",children:(0,b.jsxs)("div",{className:"flex items-start gap-3 p-4",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,b.jsx)(d,{className:"w-5 h-5 text-blue-400"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white capitalize",children:a}),(0,b.jsx)("div",{className:"mt-2 space-y-2",children:c.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-2",children:[(0,b.jsx)(g.Check,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-300",children:a.display_name}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.description}),"high"===a.risk_level||"critical"===a.risk_level?(0,b.jsx)("span",{className:`inline-block mt-1 px-2 py-0.5 rounded text-xs font-medium border ${v[a.risk_level]}`,children:"critical"===a.risk_level?"⚠️ Sensitive":"Sensitive"}):null]})]},a.scope_name))})]})]})},a)})}),(0,b.jsx)("div",{className:"mt-6 p-4 bg-slate-900/30 rounded-xl border border-slate-700/50",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(t.Lock,{className:"w-5 h-5 text-slate-400 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-xs text-slate-400",children:[(0,b.jsxs)("p",{className:"mb-2",children:["By clicking Allow, you permit this app to use your information in accordance with their"," ",(0,b.jsxs)("a",{href:w?.privacy_policy_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline inline-flex items-center gap-1",children:["privacy policy",(0,b.jsx)(s.ExternalLink,{className:"w-3 h-3"})]})]}),(0,b.jsx)("p",{children:"You can revoke this access at any time from your account settings."})]})]})})]}),(0,b.jsxs)("div",{className:"flex gap-3 p-6 border-t border-slate-700 bg-slate-900/30",children:[(0,b.jsxs)("button",{onClick:()=>G("deny"),disabled:m,className:"flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 text-white rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(h.X,{className:"w-5 h-5"}),"Deny"]}),(0,b.jsxs)("button",{onClick:()=>G("approve"),disabled:m,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-slate-600 disabled:to-slate-600 text-white rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:[m?(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,b.jsx)(g.Check,{className:"w-5 h-5"}),"Allow"]})]})]})})}a.s(["default",()=>w])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__77355ab2._.js.map